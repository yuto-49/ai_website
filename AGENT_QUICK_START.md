# Agentic System - Quick Start Guide

## What is it?

Your chat application now has **AI agents** that work in the background to enhance conversations. Currently, a **Brainstorming Agent** automatically generates related topic ideas every time you send a message.

## How to Use

### 1. Start the Backend

```bash
# Make sure you have dependencies installed
pip install -r requirements.txt

# Start the server
python server.py
```

### 2. Start the Frontend

```bash
# Install dependencies (if not done)
npm install

# Start development server
npm run dev
```

### 3. Chat and See Magic Happen

1. Open the app in your browser
2. Send a message in the chat
3. Navigate to the **Map** view (click "Map" in sidebar or go to `/map`)
4. You'll see **purple nodes with sparkle badges** âœ¨ - these are AI-generated topic ideas!
5. Click on any purple node to start a conversation about that topic

## Visual Guide

### Normal Nodes
- White/gray nodes
- Created by you manually

### AI-Generated Nodes
- **Purple gradient border**
- **Sparkle badge** (âœ¨) in corner
- Tooltip says "AI-generated by brainstorming"

## How It Works

```
You send message â†’ AI responds â†’ Brainstorming Agent generates 1-3 topic ideas â†’
New nodes appear in Map â†’ You can explore these topics
```

## Adding More Agents (5-Minute Guide)

### Backend (`server.py`)

1. **Add to registry:**
```python
"my_agent": {
    "name": "My Agent",
    "model": "claude-3-haiku-20240307",
    "max_tokens": 300,
    "temperature": 0.7,
    "enabled": True,
    "execution": "parallel",
    "description": "What my agent does"
}
```

2. **Enable it:**
```python
def get_enabled_agents():
    return ["brainstorming", "my_agent"]
```

3. **Implement executor:**
```python
@staticmethod
def execute_my_agent(messages, context=None):
    config = AgentRegistry.get_agent_config("my_agent")

    prompt = "Your prompt here..."

    response = client.messages.create(
        model=config["model"],
        max_tokens=config["max_tokens"],
        messages=[{"role": "user", "content": prompt}]
    )

    result = "".join(block.text for block in response.content
                     if isinstance(block, TextBlock))

    return {
        "success": True,
        "result": result,
        "agent": "my_agent"
    }
```

4. **Add to run_agents:**
```python
elif agent_type == "my_agent":
    futures[agent_type] = executor.submit(
        AgentExecutor.execute_my_agent,
        messages,
        context
    )
```

### Frontend (`App.jsx`)

5. **Handle results:**
```python
const handleAgentResults = (agentResults, sourceConversationId) => {
    // ... existing code ...

    if (agentResults.my_agent?.success) {
        console.log("My agent result:", agentResults.my_agent.result)
        // Do something with the result!
    }
}
```

Done! ğŸ‰

## Configuration

### Disable Brainstorming Agent

**Temporary (Frontend):**
```javascript
// In App.jsx, handleSendMessage function
enabledAgents: []  // Empty array = no agents
```

**Permanent (Backend):**
```python
# In server.py, AgentRegistry
"brainstorming": {
    ...
    "enabled": False,  # Disable
}
```

### Adjust Creativity

```python
"temperature": 0.9  # More creative ideas
"temperature": 0.3  # More focused ideas
```

### More/Fewer Ideas

Edit the brainstorming prompt:
```python
# In execute_brainstorming_agent
"""Based on this conversation, generate 1-5 short ideas...  # Change from 1-3
"""
```

## Common Agent Ideas

### 1. Summary Agent
```python
"summarizer": {
    "description": "Summarizes conversations",
    # Runs after every 5 messages
    # Stores summary in conversation metadata
}
```

### 2. Fact Checker Agent
```python
"fact_checker": {
    "description": "Verifies factual claims",
    # Highlights uncertain statements
    # Provides sources
}
```

### 3. Code Reviewer Agent
```python
"code_reviewer": {
    "description": "Reviews code snippets",
    # Detects code in messages
    # Suggests improvements
}
```

### 4. Question Generator Agent
```python
"question_generator": {
    "description": "Generates follow-up questions",
    # Creates question nodes
    # Encourages deeper exploration
}
```

## Tips

1. **Start simple** - Copy the brainstorming agent and modify it
2. **Test in console** - Check `console.log(agentResults)` in browser
3. **Use cheap models** - Haiku is fast and affordable for agents
4. **Handle errors** - Agents might fail, always check `success: true`
5. **Be creative** - Agents can do anything an LLM can do!

## Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Frontend                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚ User sends   â”‚                                       â”‚
â”‚  â”‚  message     â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  API Call with:              â”‚                      â”‚
â”‚  â”‚  - message                   â”‚                      â”‚
â”‚  â”‚  - conversationMessages      â”‚                      â”‚
â”‚  â”‚  - enabledAgents             â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Backend                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Main Chat Response          â”‚                      â”‚
â”‚  â”‚  (Claude API)                â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚              â”‚                                          â”‚
â”‚              â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Agent Executor              â”‚                      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                      â”‚
â”‚  â”‚  â”‚ Brainstorming Agent    â”‚  â”‚                      â”‚
â”‚  â”‚  â”‚ (Parallel)             â”‚  â”‚                      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                      â”‚
â”‚  â”‚  â”‚ Your Agent Here        â”‚  â”‚                      â”‚
â”‚  â”‚  â”‚ (Parallel)             â”‚  â”‚                      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚             â”‚                                           â”‚
â”‚             â–¼                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Response JSON:              â”‚                      â”‚
â”‚  â”‚  - response                  â”‚                      â”‚
â”‚  â”‚  - agentResults              â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Frontend                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  handleAgentResults()        â”‚                      â”‚
â”‚  â”‚  - brainstorming â†’ nodes     â”‚                      â”‚
â”‚  â”‚  - your_agent â†’ action       â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚             â”‚                                           â”‚
â”‚             â–¼                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  NodeMap displays:           â”‚                      â”‚
â”‚  â”‚  - Normal nodes (white)      â”‚                      â”‚
â”‚  â”‚  - AI nodes (purple âœ¨)      â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
server.py                 # Backend with agent system
â”œâ”€â”€ AgentRegistry        # Agent configurations
â”œâ”€â”€ AgentExecutor        # Agent implementations
â””â”€â”€ /api/chat endpoint   # Main API endpoint

src/App.jsx              # Frontend logic
â”œâ”€â”€ handleSendMessage()           # Sends to backend
â”œâ”€â”€ handleAgentResults()          # Processes results
â””â”€â”€ createAutoGeneratedNodes()    # Creates nodes

src/components/NodeMap.jsx   # Visual display
â””â”€â”€ AI-generated node rendering

src/App.css             # Styling
â””â”€â”€ .is-ai-generated styles
```

## Debugging

### Backend Issues

```bash
# Check backend logs
python server.py

# Look for:
# âœ… "API key loaded successfully"
# âœ… "Server starting on http://localhost:5001"
# âŒ Any errors about agents
```

### Frontend Issues

```javascript
// In browser console (F12)
// After sending a message, check:
console.log(data.agentResults)

// Should see:
// {
//   brainstorming: {
//     success: true,
//     ideas: ["...", "..."],
//     agent: "brainstorming"
//   }
// }
```

### Common Issues

**No purple nodes appearing:**
- Check that `agentResults.brainstorming.success === true`
- Verify at least 1 idea was generated
- Navigate to `/map` to see nodes

**Agents not running:**
- Confirm `enabledAgents: ['brainstorming']` in API call
- Check `enabled: true` in backend config

**API errors:**
- Verify ANTHROPIC_API_KEY is set
- Check you have API credits
- See server logs for details

## Next Steps

1. âœ… You have a working brainstorming agent
2. ğŸ“š Read `AGENTIC_SYSTEM.md` for detailed docs
3. ğŸ”¨ Build your first custom agent
4. ğŸ¨ Customize the visual styling
5. ğŸš€ Deploy and share!

Need help? Check the full documentation in `AGENTIC_SYSTEM.md`
